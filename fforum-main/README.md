### Форум

Приложение форума, созданное с использованием NodeJS, Express, ReactJS и MongoDB.

### Функции

1. Система входа в систему
2. Страницы с отдельными сообщениями
3. Голоса за/против
4. Поиск и фильтрация постов
5. Система вложенных комментариев.
6. JWT
7. Хранение значков пользователей на диске.

### Ответ

Почему JWT?
Благодаря системе токенов обновления/доступа приложение обеспечивает хороший баланс между безопасностью и скоростью.
Срок действия токенов доступа истекает через определенное время, и вам необходимо получить токены обновления из базы данных, чтобы получить новый токен доступа. Если срок действия токена доступа не истек, приложение проверяет подлинность запроса. Если токен доступа не истек, приложение аутентифицирует запрос без чтения из базы данных.

Почему МongoDB?
Сообщения и комментарии хранятся как один тип «документа» и имеют разные атрибуты. В результате у вас есть неструктурированные данные, и для этого лучше подходит MongoDB. 
Были и другие примеры неструктурированных данных, которые легко реализовать с помощью MongoDB.

Зачем хранить значки пользователей на диске?
О хранении базы данных не может быть и речи — оно слишком медленное. Два других варианта были на дисковом или облачном хранилище.
Диск просто имеет больше смысла для небольшого проекта, такого как этот. 

### Установка

Убедитесь, что вы находитесь в каталоге вашего приложения.
После этого выполните следующие команды:

```
установка npm --dev
cd client
установка npm --dev
```


Файл local.env должен выглядеть примерно так. 

```
URI=mongodb://localhost:27017/?readPreference=primary&appname=MongoDB%20Compass&ssl=false
PORT=3001
TOKEN_EXPIRATION_TIME = '15 мин'
MAX_COMMENT_DEPTH = 3
# Измените это в production
ACCESS_JWT_SECRET = '9hmvkQYqwPyM5AwqirC8'
REFRESH_JWT_SECRET = 'UeQ31thCgXWBqMvoBocC'
```

Вам нужно будет скопировать содержимое local.env в файл .env и при необходимости отредактировать переменные среды. Замените `URI` на URI вашего собственного соединения MongoDB. Изменение «PORT» приведет к изменению порта, на котором работает внутренний сервер, однако вам нужно будет отредактировать поле «proxy» клиентского package.json, чтобы оно также использовалось на этом порту.

В каталоге клиента также имеется файл constants.js с переменными конфигурации клиента.

Чтобы запустить внутренний сервер и сервер разработки клиента, запустите npm start из клиентского и корневого каталогов.
Для запуска тестов используйте эту команду из корневого каталога

```
npm-tests
```


Развертывание

Скомпилируйте код сервера и код клиента, запустив npm run build.
Это создаст папку dist с кодом сервера javascript и папку сборки внутри клиентского кода со встроенным
клиентский код. Если вы хотите обслуживать статические клиентские файлы с помощью Express, измените переменную env ``MODE`` на PRODUCTION.
В противном случае вы можете просто обслуживать их с помощью другого сервиса, например NGINX.
